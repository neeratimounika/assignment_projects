(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{jSc6:function(e,n,t){"use strict";t.r(n),n.default='\x3c!-- <ion-header>\n    <ion-toolbar>\n        <ion-buttons slot="start">\n            <ion-menu-button></ion-menu-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header> --\x3e\n<ion-content class="ion-padding">\n    <ion-grid *ngIf="issued_documents" [fixed]="true">\n        <div class="pageMargin"></div>\n        <ion-row *ngIf="!isTimeout">\n            <ion-col size-xl="10" size="12">\n                <ion-text color="tertiary" mode="ios">\n                    <h2><strong>\n                            {{"You have" | translate}} {{issued_documents.length==0?\'0\':issued_documents.length}}\n                            {{"Issued Documents you have" | translate}}\n                        </strong>\n                        <ion-button *ngIf="!deviceSize" mode="ios" size="small" (click)="refreshIssuedDocList()" class="ion-float-end ion-no-margin-top ion-no-padding-top" color="light" shape="round">\n                            <ion-icon name="refresh-outline"></ion-icon>\n                        </ion-button>\n                    </h2>\n                </ion-text>\n                <ion-text>\n                    <h4>{{"digilockerIssued_itAct" | translate}}\n                    </h4>\n                </ion-text>\n            </ion-col>\n            <ion-col size-xl="2" *ngIf="deviceSize">\n                <ion-button mode="ios" size="small" (click)="changeView()" class="ion-float-end ion-margin-top" color="light" shape="round" title="{{gridView?\'Click for Grid\':\'Click for List\'}}">\n                    <ion-icon name="{{gridView?\'grid-outline\':\'list-outline\'}}"></ion-icon>\n\n                </ion-button>\n            </ion-col>\n        </ion-row>\n        <ion-row *ngIf="issued_documents && issued_documents.length > 10" class="ion-no-margin-top">\n            <ion-col>\n                <ion-text>\n                    <ion-searchbar [(ngModel)]="filterTerm" placeholder="{{\'Search your issued documents\' | translate}}" animated="true">\n                    </ion-searchbar>\n                </ion-text>\n            </ion-col>\n        </ion-row>\n\n        <ion-row *ngIf="issued_documents.length > 0">\n\n            <ion-col size="12" class="ion-no-padding">\n\n                <div class="msplrCard" [style]="gridView?\'\':\'width:30% !important;\'" *ngFor="let issuedDocs of issued_documents | filter:filterTerm">\n\n                    <ion-card mode="ios" class="ion-no-margin  {{gridView?\'ion-no-padding\':\'ion-padding\'}}" title="{{issuedDocs.docDescription | translate}}">\n\n                        <ion-item lines="none">\n                            <ion-avatar slot="start" (click)="viewDocuments(issuedDocs)">\n                                <img  [lazyLoad]="\'https://cf-media.api-setu.in/logo/issuers/\'+issuedDocs.org_id+\'.png\'" alt="{{issuedDocs.docDescription}}" [defaultImage]="loadingImg" [errorImage]="cardErrImg" offset="100">\n                             </ion-avatar>\n                            <ion-label (click)="viewDocuments(issuedDocs)"> \n                                <h3 class="ion-text-wrap ion-no-margin">\n                                    {{issuedDocs.docDescription| translate}}\n\n                                </h3>\n\n                                <p class="ion-text-wrap" title=" {{(issuedDocs.uri.split(\'-\')[1]==\'ADHAR\')?\'************\':issuedDocs.uri.split(\'-\')[2]}}">\n                                    {{(issuedDocs.uri.split(\'-\')[1]==\'ADHAR\')?\'************\':issuedDocs.uri.split(\'-\')[2]}}\n                                </p>\n\n                            </ion-label>\n\n                            <ion-label *ngIf="gridView && deviceSize" lines="none" (click)="viewDocuments(issuedDocs)">\n                                <ion-label>\n                                    <h3 class="ion-text-wrap ion-no-margin" title="{{issuedDocs.orgName | translate}}" color="medium">{{issuedDocs.orgName| translate}}</h3>\n                                    <p class="ion-text-wrap" title="{{issuedDocs.modified_on}}">\n                                        {{issuedDocs.modified_on}}</p>\n                                </ion-label>\n                            </ion-label>\n                            <ion-buttons slot="end" *ngIf="gridView">\n                                \x3c!-- <ion-button *ngIf="issuedDocs.doc_type_id==\'ADHAR\'" color="medium" size="small"> --\x3e\n                                <ion-button color="medium" size="small">\n                                    <ion-icon name="download-outline" style="color:#fff;"></ion-icon>\n                                </ion-button>\n                                <ion-button color="medium" title="{{\'Download\' | translate}}" size="small" (click)="presentPopover($event,[issuedDocs.dataType.pdf?\'PDF\':null,issuedDocs.dataType.xml?\'XML\':null,issuedDocs.dataType.json?\'JSON\':null],\'download\',issuedDocs)">\n                                    \x3c!-- <ion-button *ngIf="issuedDocs.doc_type_id!=\'ADHAR\'" color="medium" title="{{\'Download\' | translate}}" size="small" (click)="presentPopover($event,[issuedDocs.dataType.pdf?\'PDF\':null,issuedDocs.dataType.xml?\'XML\':null,issuedDocs.dataType.json?\'JSON\':null],\'download\',issuedDocs)"> --\x3e\n                                    <ion-icon name="download-outline"></ion-icon>\n                                </ion-button>\n                                <ion-button color="medium" title="{{\'More\' | translate}}" size="small" (click)="presentPopover($event,[\'REFRESH\',issuedDocs.delete?\'DELETE\':null],\'action\',issuedDocs)">\n                                    <ion-icon name="ellipsis-vertical"></ion-icon>\n                                </ion-button>\n                            </ion-buttons>\n                        </ion-item>\n                        <ion-item lines="none" (click)="viewDocuments(issuedDocs)" *ngIf="!gridView">\n                            <ion-label>\n                                <p class="ion-text-wrap" title="{{issuedDocs.orgName | translate}}">{{issuedDocs.orgName| translate}}\n                                </p>\n                            </ion-label>\n                        </ion-item>\n                        <ion-row *ngIf="!gridView">\n                            <ion-col size-md="9" (click)="viewDocuments(issuedDocs)">\n\n                            </ion-col>\n                            <ion-col size-md="3">\n                                <ion-buttons>\n                                    \x3c!-- <ion-button color="medium" size="small">\n                                        <ion-button *ngIf="issuedDocs.doc_type_id==\'ADHAR\'" color="medium" size="small">\n                                        <ion-icon name="download-outline" style="color:#fff;"></ion-icon>\n                                    </ion-button> --\x3e\n                                    <ion-button color="medium" title="{{\'Download\' | translate}}" size="small" (click)="presentPopover($event,[issuedDocs.dataType.pdf?\'PDF\':null,issuedDocs.dataType.xml?\'XML\':null,issuedDocs.dataType.json?\'JSON\':null],\'download\',issuedDocs)">\n                                        \x3c!-- <ion-button *ngIf="issuedDocs.doc_type_id!=\'ADHAR\'" color="medium" title="{{\'Download\' | translate}}" size="small" (click)="presentPopover($event,[issuedDocs.dataType.pdf?\'PDF\':null,issuedDocs.dataType.xml?\'XML\':null,issuedDocs.dataType.json?\'JSON\':null],\'download\',issuedDocs)"> --\x3e\n                                        <ion-icon name="download-outline"></ion-icon>\n                                    </ion-button>\n                                    <ion-button color="medium" title="{{\'More\' | translate}}" size="small" (click)="presentPopover($event,[\'REFRESH\',issuedDocs.delete?\'DELETE\':null],\'action\',issuedDocs)">\n                                        <ion-icon name="ellipsis-vertical">ssssss</ion-icon>\n                                    </ion-button>\n                                </ion-buttons>\n                            </ion-col>\n                        </ion-row>\n                    </ion-card>\n                </div>\n            </ion-col>\n        </ion-row>\n\n        <ion-row class="ion-margin-top" *ngIf="issued_documents.length > 0">\n            <ion-col class="ion-text-center">\n                <ion-button color="primary" mode="ios" routerLink="/dashboard">\n                    <ion-icon name="search-outline" class="ion-margin-end"></ion-icon>\n                    <ion-text> {{"Get More Issued Documents" | translate}} </ion-text>\n                </ion-button>\n            </ion-col>\n        </ion-row>\n\n        <ion-row *ngIf="!this.isVerifiedUser">\n            <ion-col class="ion-text-center">\n                To get best value from DigiLocker, verify your Aadhaar to enable more authentic document access.\n                <ion-text color="primary" class="cursor" routerLink="/verify-aadhaar" routerDirection="root"> Verify now\n                </ion-text>\n            </ion-col>\n        </ion-row>\n        <ion-row *ngIf="issued_documents.length == 0">\n\n            <ion-col size-md="8" offset="2">\n                <ion-row class="ion-no-margin">\n                    <ion-col class="ion-text-center">\n                        <img width="300px" [src]="isTimeout?maintenanceImg:\'https://img1.digitallocker.gov.in/assets/img/icons/empty-issued-doc.svg\'">\n                    </ion-col>\n                </ion-row>\n                <ion-row class="ion-no-margin" *ngIf="!isTimeout">\n                    <ion-col class="ion-text-center">\n                        <ion-title color="dark" class="ion-margin-bottom">\n                            {{\'noIssuedDoc\' | translate}}...\n                        </ion-title>\n                        <ion-title>\n                            <h3>{{"Let\'s issue some documents" | translate}}</h3>\n                        </ion-title>\n                        <ion-title class="ion-margin-top">\n                            <ion-button class="text-center" routerLink="/dashboard">{{\'Get Issued Documents Now\' | translate}}\n                            </ion-button>\n                        </ion-title>\n                    </ion-col>\n                </ion-row>\n                <ion-row class="ion-no-margin" *ngIf="isTimeout">\n                    <ion-col class="ion-text-center">\n                        <ion-text color="dark" class="ion-margin-top">\n                            <h1>{{\'maintenance\' | translate}}</h1>\n                        </ion-text>\n                        <ion-text class="cursor ion-margin-top" color="tertiary" routerLink="/home" routerDirection="root">\n                            <h1>{{\'Go to Home\' | translate}}</h1>\n                        </ion-text>\n                    </ion-col>\n                </ion-row>\n            </ion-col>\n        </ion-row>\n\n    </ion-grid>\n    <ion-grid *ngIf="!issued_documents" [fixed]="true">\n        <ion-row>\n            <ion-col>\n                <div class="msplrCard" *ngFor="let issuedDocs of [].constructor(10)">\n                    <ion-card mode="ios" class="ion-no-margin ">\n                        <ion-item lines="none">\n                            <ion-avatar slot="start">\n                                <ion-skeleton-text animated></ion-skeleton-text>\n                            </ion-avatar>\n                            <ion-label>\n                                <h3 class="ion-text-wrap ion-no-margin">\n                                    <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>\n                                </h3>\n                                <p class="ion-text-wrap">\n                                    <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>\n                                </p>\n                            </ion-label>\n                            <ion-label lines="none">\n                                <ion-label>\n                                    <h3 class="ion-text-wrap ion-no-margin" color="medium">\n                                        <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>\n                                    </h3>\n                                    <p class="ion-text-wrap">\n                                        <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>\n                                    </p>\n                                </ion-label>\n                            </ion-label>\n                            <ion-icon name="ellipse" color="light"></ion-icon>\n                            <ion-icon name="ellipse" color="light"></ion-icon>\n                        </ion-item>\n                    </ion-card>\n                </div>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n</ion-content>'},l5zq:function(e,n,t){"use strict";t.r(n),n.default=".msplrCard {\n  cursor: pointer;\n  display: inline-block;\n  margin-right: 15px;\n  margin-top: 10px;\n  width: 100%;\n}\n\n.ion-text-wrap {\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.textWrap {\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.card-content-ios {\n  padding-top: 0px;\n}\n\nion-avatar {\n  width: 60px;\n  height: 60px;\n  --border-radius: 0px;\n}\n\nion-card:hover {\n  transform: translate(0, -4px);\n}\n\n@media only screen and (min-width: 768px) {\n  ion-searchbar {\n    padding-left: 0px;\n  }\n}"},xDMY:function(e,n,t){"use strict";t.r(n),t.d(n,"IssuedDocumentsPageModule",(function(){return C}));var o=t("mrSG"),i=t("fXoL"),s=t("ofXK"),a=t("tyNb"),l=t("7V3K"),d=t("9ans"),r=t("AytR"),c=t("sRcL"),u=t("TEn/"),m=t("bFEu"),h=t("kmsT"),p=t("2AYQ"),g=t("b65m"),b=t("HRk4"),w=t("Jr/8"),f=t("gamo"),D=t("jhN1"),x=t("nJp/"),v=t("sYmb");let y=class{constructor(e,n,t,o,i,s,a,l,d,c){this.ajax=e,this.modalController=n,this.sanitizer=t,this.auth=o,this.navCtlr=i,this.alertCtrl=s,this.popoverCtrl=a,this.platform=l,this.titleService=d,this._translate=c,this.deviceSize=this.platform.isLandscape(),this.cardErrImg=r.a.cardErrImg,this.loadingImg=r.a.loadingImg,this.issued_documents=null,this.isVerifiedUser=this.auth.isVerified(),this.profile=null,this.ionError=!1,this.gridView=!0,this.maintenanceImg=r.a.maintenanceImg,this.isTimeout=!1,this.issuedDocRefreshing=!1,this.prevDate=(new Date).toLocaleDateString("en-UK").replace(/\//g,"-"),this.profile=this.auth.userProfile(),this.isVerifiedUser=r.a.verified_user_type.includes(this.profile.user_type)}ionViewDidEnter(){this.titleService.setTitle("Issued Documents")}ngOnInit(){}ionViewWillEnter(){this.getIssuedDocuments()}changeView(){return Object(o.b)(this,void 0,void 0,(function*(){this.gridView=!this.gridView}))}getIssuedDocuments(){return Object(o.b)(this,void 0,void 0,(function*(){let e=this.ajax.getIssuedDoc(),n=e||[];this.ajax.postMethod(r.a.issued_documents,"",{}).subscribe(e=>{null==e.status?(this.issued_documents=[].concat(n,e),this.issued_documents.sort((e,n)=>n.metadata-e.metadata),this.isVerifiedUser||this.issued_documents.length||this.navCtlr.navigateRoot("verify-aadhaar")):(this.isTimeout=!0,null==e.name&&"TimeoutError"!=e.name&&this.ajax.showToast(this._translate.instant("Internal server error."),5e3,"warning","bottom"),this.issued_documents=[])})}))}viewDocuments(e,n){return Object(o.b)(this,void 0,void 0,(function*(){let t=["ADHAR","HSCER","SSCER","HSTR1","SSTR1"],o=["000133","000027","000127","001925"];this.ajax.showLoader();let i="1"==e.metadata&&t.includes(e.doc_type_id)&&o.includes(e.org_id)?r.a.metadata:r.a.pdfdata;this.ajax.postMethod(i,encodeURI("URI="+e.uri),{}).subscribe(i=>{if(this.ajax.hideLoader(),null!=i.status&&1!=i.status||i==[])null!=i.message&&this.ajax.showToast(i.message,5e3),null!=i.status_code&&601==i.status_code&&"ADHAR"==n.split("-")[1]&&this.navCtlr.navigateForward("/issued-documents/aadhar");else{let n=["1","2","3","4","5"];"1"==e.metadata&&n.includes(i.templateId)&&t.includes(e.doc_type_id)&&o.includes(e.org_id)?this.docTemplates(i,e):void 0!==i.DocContent&&(i.templateId=9999,this.docTemplates(i,e))}})}))}refreshDocument(e){if(console.log(e.doc_type_id),"ADHAR"==e.uri.split("-")[1])this.navCtlr.navigateForward("issued-documents/aadhar");else{this.ajax.showLoader();let n=r.a.refreshIssuedDoc;this.ajax.postMethod(n,encodeURI("URI="+e.uri),{}).subscribe(n=>{this.ajax.hideLoader(),n.status||void 0!==n.DocContent?(n.templateId=9999,this.docTemplates(n,e),this.ajax.showToast(e.docDescription+" updated successfully.",5e3,"success","bottom")):this.ajax.showToast(n.message,5e3)})}}deleteDocument(e){return Object(o.b)(this,void 0,void 0,(function*(){(yield this.deleteDocAlert(e))&&this.deleteDocumentRequest(e)}))}deleteDocAlert(e){return Object(o.b)(this,void 0,void 0,(function*(){return new Promise(n=>Object(o.b)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({message:"You are trying to delete the <b>"+e.docDescription+"</b> which was earlier fetched by you on <b>"+e.issuedOn+"</b>. Are you sure you want to permanently delete this document?",buttons:[{text:this._translate.instant("Cancel"),role:"cancel",cssClass:"primary",handler:()=>n(!1)},{text:this._translate.instant("Delete"),cssClass:"danger",handler:()=>n(!0)}]})).present()})))}))}deleteDocumentRequest(e){return Object(o.b)(this,void 0,void 0,(function*(){yield this.ajax.showLoader();let n=r.a.deleteIssuedDoc;yield this.ajax.deleteMethod(n,encodeURI("URI="+e.uri),{}).subscribe(n=>{this.ajax.hideLoader(),"error"==n.status?this.ajax.showToast(n.message,5e3,"tertiary","bottom"):(this.getIssuedDocuments(),this.ajax.showToast(e.docDescription+" "+n.message,5e3,"success","bottom"))})}))}docTemplates(e,n){return Object(o.b)(this,void 0,void 0,(function*(){let t=9999==e.templateId?this.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+e.DocContent.trim()):"";const o=yield this.modalController.create({component:"1"==e.templateId?h.a:"2"==e.templateId?p.a:"3"==e.templateId?g.a:"4"==e.templateId?b.a:"5"==e.templateId?w.a:f.a,cssClass:"UPMSP"==e.ORGID?"cardView":9999!==e.templateId?["4","5"].includes(e.templateId)?"verticalCard":"cardView":"",swipeToClose:!0,mode:"ios",componentProps:{metaDataResp:e,issuedDoc:9999==e.templateId?e:this.arrangeMetaViewData(e),docDetails:n,pdfHtml:t}});return yield o.present()}))}arrangeMetaViewData(e){let n=e.viewPosition,t=[];return Object.keys(e).map((function(o){let i=e[o];n.forEach(e=>{if(void 0!==e[o]&&"-"!=i){let n=e[o].split("|");null==t[n[0]]&&(t[n[0]]={label:null,value:[]}),void 0!==n[1]?t[n[0]].value[n[1]]=[i]:t[n[0]].value[0]=[i],void 0!==e.prefix&&(t[n[0]].label=e.prefix)}})})),t.filter((function(e){return e}))}downloadPdf(e,n){this.ajax.showLoader();let t=encodeURI("URI="+e),o="ADRUP"==n?r.a.shareprofileapi:r.a.pdfdata;this.ajax.postMethod(o,t,{}).subscribe(n=>{this.ajax.hideLoader(),void 0!==n.DocContent?this.downloadFile(n.DocContent,"pdf",e):(null!=n.message&&(null!=n.status_code?601!==n.status_code&&this.ajax.showToast(n.message,5e3):this.ajax.showToast(n.message,5e3)),null!=n.status_code&&601==n.status_code&&"ADHAR"==e.split("-")[1]&&this.navCtlr.navigateForward("/issued-documents/aadhar"))})}downloadJson(e){this.ajax.showLoader();let n=encodeURI("URI="+e);this.ajax.postMethod(r.a.jsondata,n,{}).subscribe(n=>{this.ajax.hideLoader(),void 0!==n.DataContent&&this.downloadFile(n.DataContent,"json",e)})}downloadXml(e){this.ajax.showLoader();let n=encodeURI("URI="+e);this.ajax.postMethod(r.a.xmldata,n,{}).subscribe(n=>{this.ajax.hideLoader(),void 0!==n.DataContent&&this.downloadFile(n.DataContent,"xml",e)})}downloadFile(e,n,t){let o="data:application/pdf;base64,"+e;t=t+"."+n,"pdf"!=n&&(o="data:text/plain;base64,"+e);var i=document.createElement("a");i.href=o,i.download=t,i.click()}verifyAadhar(){return Object(o.b)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:m.a,cssClass:"my-custom-class",swipeToClose:!0});return yield e.present()}))}presentPopover(e,n=[],t=null,i=null){return Object(o.b)(this,void 0,void 0,(function*(){const o=yield this.popoverCtrl.create({component:x.a,cssClass:"my-custom-class",event:e,translucent:!0,mode:"ios",componentProps:{labels:n},animated:!0});yield o.present(),yield o.onDidDismiss().then(e=>{if(null!=e.data){let n=e.data.label;"download"==t?"PDF"==n?this.downloadPdf(i.uri,i.doc_type_id):"XML"==n?this.downloadXml(i.uri):"JSON"==n?this.downloadJson(i.uri):this.ajax.showToast("No action",5e3):"action"==t&&("REFRESH"==n?this.refreshDocument(i):"DELETE"==n?this.deleteDocument(i):this.ajax.showToast("No action",5e3))}})}))}refreshIssuedDocList(){this.issuedDocRefreshing=!0,this.ajax.postMethod(r.a.refreshIssuedDocList,"",{}).subscribe(e=>{this.issuedDocRefreshing=!1,null==e.status&&e.length>0?(this.issued_documents=e,this.ajax.showToast(this._translate.instant("Issued documents list refreshed."),5e3,"primary","bottom")):this.ajax.showToast(this._translate.instant("Please try again."),5e3,"danger","bottom")})}};y.ctorParameters=()=>[{type:c.a},{type:u.h},{type:D.b},{type:d.a},{type:u.i},{type:u.a},{type:u.l},{type:u.k},{type:D.d},{type:v.c}],y=Object(o.c)([Object(i.n)({selector:"app-issued-documents",template:Object(o.e)(t("jSc6")).default,styles:[Object(o.e)(t("l5zq")).default]})],y);const I=[{path:"",component:y},{path:"temp1",loadChildren:()=>t.e(136).then(t.bind(null,"XWqu")).then(e=>e.Temp1PageModule)},{path:"temp2",loadChildren:()=>t.e(137).then(t.bind(null,"OL8j")).then(e=>e.Temp2PageModule)},{path:"temp3",loadChildren:()=>t.e(138).then(t.bind(null,"Au3K")).then(e=>e.Temp3PageModule)},{path:"temp4",loadChildren:()=>t.e(139).then(t.bind(null,"Ikcr")).then(e=>e.Temp4PageModule)},{path:"temp-pdf",loadChildren:()=>t.e(135).then(t.bind(null,"oT21")).then(e=>e.TempPdfPageModule)},{path:"temp5",loadChildren:()=>t.e(140).then(t.bind(null,"0hMa")).then(e=>e.Temp5PageModule)},{path:"aadhar",loadChildren:()=>t.e(0).then(t.bind(null,"gYfu")).then(e=>e.UpdateAadharPageModule),canActivate:[l.a]}];let j=class{};j=Object(o.c)([Object(i.M)({imports:[a.i.forChild(I)],exports:[a.i]})],j);var T=t("3Pt+"),_=t("cZdB"),k=t("wf0l");let C=class{};C=Object(o.c)([Object(i.M)({imports:[s.b,j,T.b,u.d,_.a,v.b.forChild(),k.a],declarations:[y]})],C)}}]);