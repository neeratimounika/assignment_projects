(window.webpackJsonp=window.webpackJsonp||[]).push([[20,141],{VBEu:function(n,e,t){"use strict";t.d(e,"a",(function(){return r}));var i=t("mrSG"),o=t("fXoL"),a=t("NFKh"),s=t("9ans"),l=t("4pnn");let r=class{constructor(n,e){this.auth=n,this.CookieService=e}encryptedAES(n){let e=Object(a.MD5)(this.auth.userProfile().dlId).toString();var t=a.enc.Utf8.parse(e),i=a.enc.Utf8.parse("\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"),o=a.AES.encrypt(n,t,{iv:i}).toString();return encodeURI(o.replace(/\+/g,"---"))}getEncryptedValue(n){let e=this.auth.userProfile().dlId.slice(0,16),t=Object(a.MD5)(e).toString(),i=a.enc.Utf8.parse(e),o=a.enc.Utf8.parse(t),s=a.AES.encrypt(n,o,{iv:i}).toString();return encodeURI(s.replace(/\+/g,"---"))}decryptedAES(n){let e=n.replaceAll("---","+"),t=this.CookieService.get("d")?this.CookieService.get("d").replace(/"/g,""):"",i=Object(a.MD5)(t+this.auth.userProfile().dlId).toString();var o=a.enc.Utf8.parse(i),s=a.enc.Utf8.parse("\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0");return a.AES.decrypt(e,o,{iv:s}).toString(a.enc.Utf8)}};r.ctorParameters=()=>[{type:s.a},{type:l.c}],r=Object(i.c)([Object(o.E)({providedIn:"root"})],r)},c8WM:function(n,e,t){"use strict";t.r(e),e.default=".card-color {\n  opacity: 0.5;\n}\n\nion-avatar {\n  width: 40px;\n  height: 40px;\n  --border-radius: 40px;\n}\n\nion-card {\n  border-radius: 8px;\n  padding: 5px;\n}\n\nion-list ion-card {\n  margin-inline: 0px;\n}\n\n.card {\n  cursor: pointer;\n  width: 100%;\n}\n\nion-card:hover {\n  transform: translate(0, -4px);\n}"},gcMw:function(n,e,t){"use strict";t.r(e),t.d(e,"HealthLockerPageModule",(function(){return k}));var i=t("mrSG"),o=t("fXoL"),a=t("ofXK"),s=t("3Pt+"),l=t("TEn/"),r=t("tyNb"),c=t("sRcL"),h=t("AytR"),d=t("4pnn"),u=t("9ans"),p=t("bKS9"),g=t("VBEu");let b=class{constructor(n,e,t,i,o,a,s,l,r){this.navCtlr=n,this.ajax=e,this.platform=t,this.popoverCtrl=i,this.cookieService=o,this.auth=a,this.modalController=s,this.encrypt=l,this.alertCtrl=r,this.deviceSize=this.platform.isLandscape(),this.isSkeleton=!0,this.userid=this.auth.userProfile()}ngOnInit(){this.getHealthLockerList()}getHealthLockerList(){this.ajax.showLoader();let n={"content-type":"application/json",jtoken:this.auth.getToken(),"device-security-id":this.auth.getDeviceId()},e=h.a.abhaLists;this.ajax.getMethod(e,n).subscribe(n=>{this.listOfHealthLocker=n,["ranjanashish011"].includes(this.userid.user_name)&&this.listOfHealthLocker.push({healthIdNumber:"",healthId:"ranjanashish018@sbx",kycVerified:!0,name:"Ashish Ranjan",dateOfBirth:"09/08/1989",gender:"M",mobile:null,profilePhoto:"base64ofimage",digilockerid:"ranjanashish011"}),this.ajax.hideLoader(),this.isSkeleton=!1,0==this.listOfHealthLocker.length&&this.ajax.showToast("No Record Found!",5e3,"warning")})}showDeleteFileAlert(n){return Object(i.b)(this,void 0,void 0,(function*(){return new Promise(e=>Object(i.b)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:"",message:"Are you sure you want to Unlink "+n+" ?",buttons:[{text:"Cancel",role:"cancel",handler:()=>e(!1)},{text:"Unlink",handler:()=>e(!0)}]});yield t.present()})))}))}unlinkHL(n){return Object(i.b)(this,void 0,void 0,(function*(){if(yield this.showDeleteFileAlert(n.healthId)){let e={digilockerid:n.digilockerid,consent:"true",healthid:n.healthId},t={payload:this.encrypt.getEncryptedValue(JSON.stringify(e))};this.ajax.deleteMethod(h.a.unlink_ndhm,t,{"content-type":"application/json"}).subscribe(n=>{this.ajax.hideLoader(),n.status?this.ajax.showToast(n.message,5e3,"warning"):this.ajax.showToast(n.response.message,5e3,"warning")})}}))}hlData(n){return Object(i.b)(this,void 0,void 0,(function*(){if(n.healthId){let e=n.healthId.split("@"),t=yield this.isABHAtokenID(e[0]);if(t)this.navCtlr.navigateForward("services/abha/profile/"+e[0]);else{e[1]&&e[1];let n=window.location.hostname;["www.digilocker.gov.in","wb.digilocker.gov.in"].includes(n)?e[0]=e[0]+"@abdm":e[0]=e[0]+"@sbx",this.abhaLogin(null,e[0],t)}}else{let e=yield this.isABHAtokenID(n.healthIdNumber);e?this.navCtlr.navigateForward("services/abha/profile/"+n.healthIdNumber):this.checkMode(n,e)}}))}checkMode(n,e){return Object(i.b)(this,void 0,void 0,(function*(){this.ajax.showLoader();let t=n.healthIdNumber,i=n.dateOfBirth.split("/");i=1==i.length?i[0]:i[2];let o=h.a.phrAuthMode,a={healthIdNumber:t,yearOfBirth:i};this.ajax.postMethod(o,a,{"content-type":"application/json"}).subscribe(t=>{this.ajax.hideLoader(),t.status?this.abhaLogin(t.response,n.healthIdNumber,e):this.ajax.showToast(t.response.message,5e3,"warning")})}))}isABHAtoken(n){let e=this.userid.dlId+"_"+n.split("@")[0],t=this.cookieService.get(e);return null!=t&&t.replace(/"/g,"")}isABHAtokenID(n){let e=this.userid.dlId+"_"+n.split("@")[0],t=this.cookieService.get(e);return null!=t&&t.replace(/"/g,"")}toLinkPage(){this.navCtlr.navigateForward("uhid")}dismiss(){this.navCtlr.pop()}abhaLogin(n,e,t){return Object(i.b)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({component:p.a,cssClass:"my-custom-class",swipeToClose:!0,componentProps:{state:{resp:n,id:e,token:t}},backdropDismiss:!1});i.present(),i.onDidDismiss().then(n=>{})}))}};b.ctorParameters=()=>[{type:l.i},{type:c.a},{type:l.k},{type:l.l},{type:d.c},{type:u.a},{type:l.h},{type:g.a},{type:l.a}],b=Object(i.c)([Object(o.n)({selector:"app-health-locker",template:Object(i.e)(t("tRKd")).default,styles:[Object(i.e)(t("c8WM")).default]})],b);const f=[{path:"",component:b},{path:"profile/:hlId",loadChildren:()=>Promise.all([t.e(0),t.e(65)]).then(t.bind(null,"cFeu")).then(n=>n.ProfilePageModule)},{path:"hips",loadChildren:()=>Promise.all([t.e(0),t.e(61)]).then(t.bind(null,"OKpi")).then(n=>n.HipsPageModule)},{path:"drive",loadChildren:()=>Promise.all([t.e(0),t.e(60)]).then(t.bind(null,"ZWji")).then(n=>n.DrivePageModule)}];let m=class{};m=Object(i.c)([Object(o.M)({imports:[r.i.forChild(f)],exports:[r.i]})],m);let k=class{};k=Object(i.c)([Object(o.M)({imports:[a.b,s.b,l.d,m],declarations:[b]})],k)},tRKd:function(n,e,t){"use strict";t.r(e),e.default='\x3c!-- <ion-header>\n    <ion-toolbar>\n        <ion-buttons slot="start">\n            <ion-menu-button></ion-menu-button>\n        </ion-buttons>\n        <ion-title></ion-title>\n    </ion-toolbar>\n</ion-header> --\x3e\n\n<ion-content class="ion-padding">\n    <div class="pageMargin"></div>\n    <ion-grid [fixed]="true">\n        <ion-row>\n            <ion-col size-md="9" size="12">\n\n                <ion-toolbar>\n                    <ion-title color="tertiary">\n                        <strong> DigiLocker ABHA </strong>\n                    </ion-title>\n                    <ion-buttons slot="start">\n                        <ion-button routerLink="/services" (click)="dismiss()" color="dark" fill="clear" shape="round" size="small">\n                            <ion-icon ios="arrow-back" md="arrow-back"></ion-icon>\n                        </ion-button>\n                    </ion-buttons>\n\n                </ion-toolbar>\n                <p>\n                    DigiLocker ABHA is a part of Ayushman Bharat Health Account (ABHA). It is the first step towards creating safer and efficient digital health records for you and your family. It allows you to access and share your health data with your consent, with participating\n                    healthcare providers.\n                </p>\n            </ion-col>\n            <ion-col size-md="3" size="2" *ngIf="listOfHealthLocker">\n                <ion-button (click)="toLinkPage()" *ngIf="listOfHealthLocker.length> 0 && deviceSize" class="ion-float-end" size="small" style="margin-top: 12px;">\n                    Fetch ABHA ID\n                </ion-button>\n           \n            </ion-col>\n            \n        </ion-row>\n\n        <ion-row *ngIf="!deviceSize">\n            <ion-col size="12" size-md="12" class="ion-text-center">\n                <ion-button (click)="toLinkPage()" size="small">\n                    <ion-icon name="add-outline" class="cursor" size="small"></ion-icon>\n                    Fetch ABHA ID\n                </ion-button>\n            </ion-col>\n        </ion-row>\n\n        <ion-row>\n            <ion-col size-md="10">\n                <ion-label color="tertiary">\n                    <strong> My ABHA ID\'s </strong>\n                </ion-label>\n            </ion-col>\n        </ion-row>\n\n        <ion-row>\n            <div class="card" *ngIf="listOfHealthLocker">\n                <ion-list *ngIf="listOfHealthLocker.length > 0">\n                    <ion-card *ngFor="let list of listOfHealthLocker" mode="ios" class="ion-no-margin ion-margin-bottom">\n                        <ion-item lines="none" >\n                            <ion-avatar slot="start" (click)="hlData(list)">\n                                <img src="/assets/img/Health_hl.svg" />\n                            </ion-avatar>\n\n                            <ion-label *ngIf="deviceSize" (click)="hlData(list)">{{list.name}}</ion-label>\n                            <ion-label color="medium" (click)="hlData(list)"><span *ngIf="list.healthIdNumber">{{list.healthIdNumber}}</span></ion-label>\n                            <ion-label color="medium" (click)="hlData(list)"><span *ngIf="list.healthId">{{list.healthId}}</span></ion-label>\n                            <ion-label (click)="hlData(list)"></ion-label>\n                            <ion-icon name="trash-outline" color="danger" (click)="unlinkHL(list)" alert="Unlink"></ion-icon>\n                        </ion-item>\n                    </ion-card>\n                </ion-list>\n            </div>\n        </ion-row>\n        <div *ngIf="listOfHealthLocker">\n            <ion-row *ngIf="listOfHealthLocker.length == 0 && !isSkeleton" class="ion-margin-top">\n                <ion-col size-md="8" offset="2">\n                    <ion-row class="ion-margin-top">\n                        <ion-col class="ion-text-center">\n                            <img src="assets/img/Health_Locker.svg" width="30%">\n                        </ion-col>\n                    </ion-row>\n                    <ion-row class="ion-no-margin">\n                        <ion-col class="ion-text-center">\n                            <ion-title color="dark">\n                                <h4>Please link your ABHA ID with your DigiLocker account in order to use ABHA Service</h4>\n                            </ion-title>\n                        </ion-col>\n                    </ion-row>\n                </ion-col>\n            </ion-row>\n        </div>\n        <ion-row class="ion-text-center" *ngIf="listOfHealthLocker">\n            <ion-col *ngIf="listOfHealthLocker.length == 0  && !isSkeleton">\n                <ion-button routerLink="/health-locker/link" (click)="toLinkPage()">Fetch ABHA ID</ion-button>\n            </ion-col>\n        </ion-row>\n        <ion-row class="ion-text-center" *ngIf="listOfHealthLocker">\n            <ion-col *ngIf="listOfHealthLocker.length == 0  && !isSkeleton">\n                <p class="ion-text-center" style="margin-top: 0px;">Don\'t have Health ID?\n                    <ion-text routerLink="/uhid/create-using-aadhaar" routerDirection="forward" class="cursor" color="primary">Register Now</ion-text>\n                </p>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n    <ion-grid [fixed]="true" *ngIf="isSkeleton">\n        <ion-row>\n            <ion-col>\n                <ion-card mode="ios" class="ion-margin " *ngFor="let list of [].constructor(3)">\n                    <ion-item lines="none">\n                        <ion-avatar slot="start">\n                            <ion-skeleton-text animated></ion-skeleton-text>\n                        </ion-avatar>\n                        <ion-label>\n                            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>\n                        </ion-label>\n                        <ion-label>\n                            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>\n                        </ion-label>\n                        <ion-label>\n                            <ion-skeleton-text animated style="width: 60%"></ion-skeleton-text>\n                        </ion-label>\n                        <ion-icon name="ellipse" color="light"></ion-icon>\n                        <ion-icon name="ellipse" color="light"></ion-icon>\n                    </ion-item>\n                </ion-card>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n</ion-content>'}}]);