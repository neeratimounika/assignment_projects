!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("rb_wixui.thunderbolt[GoogleMap]",["react"],t):"object"==typeof exports?exports["rb_wixui.thunderbolt[GoogleMap]"]=t(require("react")):e["rb_wixui.thunderbolt[GoogleMap]"]=t(e.React)}("undefined"!=typeof self?self:this,(function(e){return function(){var t={40841:function(e,t){var n;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var s=o.apply(null,n);s&&e.push(s)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var i in n)r.call(n,i)&&n[i]&&e.push(i)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},5329:function(t){"use strict";t.exports=e},448:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/";var o={};return function(){"use strict";r.r(o),r.d(o,{components:function(){return F}});var e=r(448),t=r.n(e),n=r(5329),a=r(40841),s=r.n(a);const i=()=>"undefined"!=typeof window,l=e=>Object.entries(e).reduce(((e,[t,n])=>(t.includes("data-")&&(e[t]=n),e)),{});const c=(...e)=>e.map((e=>e?`wixui-${e}`:"")).join(" ");var u={root:"google-map"};const p=()=>(e,t)=>({deps:e.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{}),resolver:t});const d=e=>e.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)),f=(p()(["experiments","isConsentPolicyActive"],(e=>{let{experiments:t,isConsentPolicyActive:n}=e;return t["specs.thunderbolt.shouldExportCurrentConsentPolicy"]&&n?"WithConsentWrapper":void 0})),e=>({consentPolicy:e.currentConsentPolicy,openSettingModal:e.openSettingModal}));function g(){const e=n.useRef([]);return[n.useCallback((()=>new Promise((t=>e.current.push(t)))),[]),n.useCallback((t=>{e.current.forEach((e=>e(t))),e.current.length=0}),[])]}const m=(e,t)=>{if(e||t)return t?{path:e,fillColor:t,strokeColor:t,fillOpacity:1,scale:.5}:(e=>{if(e&&e.endsWith(".webp"))try{const t=e.match(/media\/[^/]+/)[0].split(".")[1];e=e.replace(/.webp$/,"."+t)}catch(e){}return e})(e)},v=e=>e.map((e=>({...e,icon:m(e.pinIcon,e.pinColor)})));var y="load",h="message",M="SET_INITIAL_LOCATIONS",E="SET_CENTER",b="CENTER_UPDATED",S="SET_ZOOM",O="ZOOM_UPDATED",C="MARKER_CLICKED",w="MAP_CLICKED",_="GET_MARKERS",x="MARKERS",k="FIT_BOUNDS",N="MAP_IDLE",j="OPEN_INFO_WINDOW",P="TILES_LOADED",R="SET_MARKER_ICON",D="SET_MARKER_ICON_FINISHED";function I(e,t,r){let{mapData:o,isEditorMode:a}=t,{onUpdateZoom:s,onUpdateCenter:l,onMarkerClicked:c,onMapClicked:u}=r;const p=(0,n.useRef)([]),d=(0,n.useRef)(null),[f,m]=g(),[I,L]=g(),[A,T]=g(),[U,W]=g(),[G,J]=g(),[F,K]=g(),[Z,z]=g(),[V,B]=(0,n.useState)(!1),H=e=>{const t=d.current;return v(t||e)},$=(0,n.useMemo)((()=>({...o,locations:H(o.locations)})),[o]),q=function(e,t){void 0===t&&(t=null);const r=(0,n.useRef)(t);return(0,n.useEffect)((()=>{r.current=e}),[e]),r.current}($),Q={[b]:e=>null==l?void 0:l(e),[O]:e=>null==s?void 0:s({zoom:e}),[C]:e=>null==c?void 0:c({type:"markerClicked",...e}),[w]:e=>{let{longitude:t,latitude:n,...r}=e;return null==u?void 0:u({type:"mapClicked",location:{longitude:t,latitude:n},...r})},[x]:e=>m(e),[N]:()=>{const e=p.current.shift();null==e||e()},[P]:()=>{V||B(!0)},[D]:()=>z()},X={[y]:e=>{let{_sendMessage:t}=e;t({type:M,data:JSON.stringify({...o,locations:H(o.locations)})},{forceSend:!0})},[h]:e=>{let{event:t}=e;if("string"==typeof t.payload){var n;const{type:e,data:r}=JSON.parse(t.payload);null==(n=Q[e])||n.call(Q,r)}}},[Y,ee]=function(e){let{reducer:t=(()=>({})),iframeLoaded:r}=e;const o=(0,n.useRef)([]),a=(0,n.useRef)(void 0),s=(0,n.useRef)(void 0),l=(0,n.useRef)(void 0),c=(0,n.useCallback)(((e,t)=>{if(a.current&&r||null!=t&&t.forceSend){var n;const t=null==(n=a.current)?void 0:n.contentWindow;return void(null==t||t.postMessage(e,"*"))}if(!a.current||!s.current||!1===r)return void o.current.push(e);const i=a.current.contentWindow;null==i||i.postMessage(e,"*")}),[r]),u=(0,n.useCallback)((()=>{0!==o.current.length&&!1!==r&&(o.current.forEach((e=>c(e))),o.current=[])}),[c,r]),p=(0,n.useCallback)((e=>{if(l.current&&(l.current(),l.current=void 0),!e)return;const n=()=>{s.current=!0,u(),t({type:"load"},c)};e.addEventListener("load",n),a.current=e,l.current=()=>{e.removeEventListener("load",n)}}),[t,c,u]);return(0,n.useEffect)((()=>{r&&u()}),[r,u]),(0,n.useEffect)((()=>{if(!i())return;const e=e=>{var n;e.source&&e.source!==(null==(n=a.current)?void 0:n.contentWindow)||t({type:"message",payload:e.data},c)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[t,c]),[p,c]}({reducer:(e,t)=>{var n;return null==(n=X[e.type])?void 0:n.call(X,{event:e,_sendMessage:t})},iframeLoaded:V});return(0,n.useImperativeHandle)(e,(()=>({setMapCenter:(e,t)=>{const n=I();return ee({type:E,data:JSON.stringify({longitude:e,latitude:t})}),p.current.push(L),n},fitBounds:e=>{let{north:t,east:n,west:r,south:o}=e;const a=U();return ee({type:k,data:JSON.stringify({north:t,east:n,west:r,south:o})}),p.current.push(W),a},setMarkerIcon:e=>{let{locations:t,coordinates:n,iconOptions:r}=e;const o=Z();return d.current=t,ee({type:R,data:JSON.stringify({...n,iconOptions:r})}),o},setMapZoom:e=>{const t=A();return ee({type:S,data:e}),p.current.push(T),t},getVisibleMarkers:()=>{const e=f();return ee({type:_}),e},openInfoWindow:e=>{if(!$.showDirectionsLink){const t=F();return ee({type:j,data:JSON.stringify({locationIndex:e})}),p.current.push(K),t}return new Promise((e=>e()))},setMarkers:(e,t)=>{const n=G();return d.current=e,ee(JSON.stringify({...$,locations:v(e),openInfoWindow:null==t?void 0:t.openInfoWindow})),p.current.push(J),n}}))),(0,n.useEffect)((()=>{if(!V||!a)return;const e=!!q&&(t=$.locations,n=q.locations,t.length===n.length&&t.every(((e,t)=>{const r=Object.keys(e);return r.length===Object.keys(n[t]).length&&r.every((r=>"locationLinkAttributes"===r||e[r]===n[t][r]))})));var t,n;ee(JSON.stringify({...$,locations:H($.locations),shouldKeepMarkers:e}))}),[$,ee,V,q,a]),[Y]}var L={GoogleMapSkin:"azCDHJ",googleMapSkin:"azCDHJ",mapContainer:"UXiAup",GoogleMapDefault:"gzNVjA",googleMapDefault:"gzNVjA",GoogleMapSloppy:"FiDpOP",googleMapSloppy:"FiDpOP",brd:"vWE6wc",one:"dj3FJn",two:"W_nooy",GoogleMapLiftedShadow:"e4y5ni",googleMapLiftedShadow:"e4y5ni",shd:"up3Bvs",left:"h0JKNn",right:"uaUROu"};const A={GoogleMapLiftedShadow:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s()(L.left,L.shd)}),n.createElement("div",{className:s()(L.right,L.shd)})),GoogleMapSloppy:()=>n.createElement(n.Fragment,null,n.createElement("div",{className:s()(L.brd,L.one)}),n.createElement("div",{className:s()(L.brd,L.two)})),GoogleMapSkin:()=>n.createElement(n.Fragment,null),GoogleMapDefault:()=>n.createElement(n.Fragment,null)};var T=r.p+"media/googleMap.4be2d908.html",U=r.p+"media/google-map.min.78e15006.js";const W=e=>e.replace("https://static.parastorage.com/services/","https://editor.wix.com/_partials/"),G=(e,r)=>{const{id:o,className:a,customClassNames:p=[],skin:d,urlQueries:f,mapData:g,translations:m,isConsentPolicyActive:v,onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E,onMouseEnter:b,onMouseLeave:S,isDesignerMode:O,isEditorMode:C}=e,w=A[d],_=((e,t)=>{const n=t?W(U):U,r=new URLSearchParams({googleMapsScriptPath:new URL(n).pathname});return i()&&r.append("origin",window.origin),(t?W(T):T)+"?"+e+"&"+r})(f,O),[x,k]=n.useState(!1),[N]=I(r,{mapData:g,isEditorMode:C},{onUpdateCenter:y,onUpdateZoom:h,onMarkerClicked:M,onMapClicked:E});n.useEffect((()=>{k(!0)}),[_]);const j=m.title,P=((e,t)=>e?{}:t)(v,{id:o,className:s()(L[d],L.wixIframe,a,c(u.root,...p)),...l(e)});return n.createElement("div",t()({},P,{tabIndex:0}),x&&n.createElement("wix-iframe",{title:j,"aria-label":j,"data-src":_},n.createElement(w,null),n.createElement("div",{id:"mapContainer_"+o,onMouseEnter:b,onMouseLeave:S,className:L.mapContainer},n.createElement("iframe",{ref:N,title:j,"aria-label":j,"data-src":_,width:"100%",height:"100%",frameBorder:"0",scrolling:"no",allowFullScreen:!0}))))};var J;const F={GoogleMap:{component:n.forwardRef(G),controller:(J=e=>{let{stateValues:t,mapperProps:n}=e;return{...n,...f(t)}},{useComponentProps:(e,t,n)=>{const r=(e=>Object.assign(Object.assign({},e),{updateStyles:t=>{const n=Object.entries(t).reduce(((e,[t,n])=>{return Object.assign(Object.assign({},e),{[(r=t,r.startsWith("--")?t:d(t))]:void 0===n?null:n});var r}),{});e.updateStyles(n)}}))(n);return J({mapperProps:e,stateValues:t,controllerUtils:r})}})}}}(),o}()}));
//# sourceMappingURL=https://static.parastorage.com/services/editor-elements-library/dist/thunderbolt/rb_wixui.thunderbolt[GoogleMap].313bfb3d.bundle.min.js.map